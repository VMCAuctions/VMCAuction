<div class="card-body">
    <h5>Here is your information:</h5>
    <h6 class="pin mb-3">*Please fill in any missing fields.</h6>
    <form id="registrationForm" action="/<%=user._id%>/clerkUserUpdate" method="post">
        
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="firstName">First Name</label>
                <input type="text" name="firstName" class="form-control" value="<%=user.firstName%>">
            </div>
            <div class="form-group col-md-6">
                <label for="lastName">Last Name</label>
                <input type="text" name="lastName" class="form-control" value="<%=user.lastName%>">
            </div>
        </div>

        <div class="form-group">
            <label for="userName">Email/Username</label>
            <input type="email" name="userName" class="form-control" readonly value="<%=user.userName%>">
        </div>
        <div class="form-group">
            <label for="phoneNumber">Cell Phone Number</label>
            <input type="tel" name="phone" id="phoneNumber" class="form-control" value="<%=user.phone%>">
        </div>

        <div class="form-group">
            <label for="streetAddress">Address</label>
            <input type="text" name="address" class="form-control" value="<%=user.streetAddress%>" placeholder="Street Address">
        </div>

        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="city">City</label>
                <input type="text" name="city" class="form-control" value="<%=user.city%>" placeholder="City">
            </div>
            <div class="form-group col-md-3">
                <label for="states">State</label>
                <input type="text" name="states" class="form-control" value="<%=user.states%>" placeholder="State">
            </div>
            <div class="form-group col-md-3">
                <label for="zip">Zipcode</label>
                <input type="text" name="zip" class="form-control" value="<%=user.zip%>" placeholder="Zipcode">
            </div>
            
        </div>

        <div class="form-group1">
        <input type="submit" name="submit" value="Update" class="btn btn-submit mt-1" id="submitButton">
        </div>
        <div class="demo-placeholder">
            <button type="button" id="sendLinkButton" onclick="loadSupportedSearch()" class="btn btn-add mt-3 show-modal" data-toggle="modal" data-target="#itemsModal" >
                    Send Auction link
                    </button>
                
        </div>
    </form>
</div>

<script>
    $("#phoneNumber").inputmask("999-999-9999");
    var validator = $("#registrationForm").validate({
        rules: {
            firstName: {
                required: true,
                rangelength: [2, 50]
            },
            lastName: {
                required: true,
                rangelength: [2, 50]
            },
            phoneNumber: {
                required: true,
                phoneUS: true,
            },
		}
	});

    $.validator.methods.email = function( value, element ) {
        return this.optional( element ) || /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test( value );
    }
    jQuery.validator.addMethod("street", function(value, element) {
        return this.optional(element) || /^\s*\S+(?:\s+\S+){2}/.test(value);
    }, "Please specify a valid street address");

    jQuery.validator.addMethod("state", function(value, element) {
        return this.optional(element) || /^(A[AEKLPRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY]|a[aeklprz]|c[aot]|d[ce]|fl|ga|hi|i[adln]|k[sy]|la|m[adeinost]|n[cdehjmvy]|o[hkr]|pa|ri|s[cd]|t[nx]|ut|v[at]|w[aivy])$/.test(value);
    }, "Please specify the two-digit code for a US state");

    jQuery.validator.addMethod("user", function(value, element) {
        return this.optional( element ) || /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test( value );
    });

    validator.form();
    
    
    $('#submitButton').click(function(e){
        e.preventDefault();
        var userN = '<%=user.firstName%>'
        $.ajax({
            url:'/<%=user._id%>/clerkUserUpdate',
            type:'post',
            data:$('form#registrationForm').serialize(),
            success:function(){
                // alert("You have successfully updated "+userN+"'s info.");
                location.reload();
            }
        })
    })
</script>