<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>login</title>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.min.js"></script>
  </head>
  <body>


    <%if(admin){%>
    <%- include('admin_header') -%>
    <%}else{%>
      <%- include('header') -%>
    <%}%>
    <div class="container">
      <div class="well my-4">
        <form id="loginForm" class="ml-0" action="/api/users/login" method="post">
          <div class="form-group row">
            <label class="col-sm-2 col-form-label">User Name</label>
            <div class="col-sm-10">
              <input placeholder="User Name" type="text" name="userName" id="userName" class="form-control" value required>
            </div>
          </div>

          <div class="form-group row">
            <label class="col-sm-2 col-form-label">Password</label>
            <div class="col-sm-10">
              <input placeholder="Password" type="password" name="password" id="password" class="form-control" value required>
            </div>
          </div>

          <input type="submit" name="submit" value="submit" class="btn btn-default">

        </form>

      </div>
    </div>
    <script type="text/javascript">
    var validator = $("#loginForm").validate({
      rules: {
        password: {
              required: true,
              remote: {
                url: "/users/checkLogin",
                type: "post",
                data: {
                  userName: function() {
                    return $( "#userName" ).val();
                  }
                },
                dataType: 'json',
                success: function(data) {
                    console.log("data is", data)
                    if (data.match === false)
                      {
                        console.log("on frontend, match is false")
                        message: {
                            password: 'Username and password do not match!'
                      }
                    }
                }
              }
            }
      }
    });

    validator.form();

    // $("#password").keyup(function(){
    //   console.log(res)
    // })
    </script>
  </body>
</html>
